---
title: "Promise APIs Compared: all vs race vs any vs allSettled"
summary: "A practical and conceptual comparison of Promise.all, Promise.race, Promise.any, and Promise.allSettled."
publishedTime: "2025-12-30"
tags: ["javascript", "promises", "async", "event loop"]
---

# Promise APIs Comparison: `all` vs `race` vs `any` vs `allSettled`

JavaScript provides multiple Promise combinators.  
They all **start promises concurrently**, but they differ in **when they resolve/reject** and **what they return**.

Understanding the differences prevents subtle bugs and improves performance.

---

## ðŸ§  Quick Overview

| API | Resolves when | Rejects when | Typical use |
|----|--------------|--------------|-------------|
| `Promise.all` | All promises resolve | Any promise rejects | All-or-nothing |
| `Promise.race` | First promise settles | First promise settles | Timeout / fastest |
| `Promise.any` | First promise resolves | All promises reject | First success |
| `Promise.allSettled` | All promises settle | âŒ Never rejects | Collect results |

---

## ðŸ”¹ Promise.all

### Behavior
- Waits for **all promises to resolve**
- Rejects immediately if **any promise rejects**

```js
await Promise.all([
  fetch("/a"),
  fetch("/b"),
  fetch("/c"),
]);
```

### Timeline
```
A â”€â”€â”€â”€â”€â”
B â”€â”€â”€â”€â”€â”¼â”€â”€â–º resolve
C â”€â”€â”€â”€â”€â”˜
```

### When to use
âœ… You need **all results**  
âŒ One failure should stop everything

### Common mistake
```js
await Promise.all(tasks); // crashes if one fails
```
If partial success is acceptable â†’ use `allSettled`.

---

## ðŸ”¹ Promise.race

### Behavior
- Settles as soon as **the first promise settles**
- That settlement can be **resolve or reject**

```js
await Promise.race([
  fetch("/data"),
  timeout(3000),
]);
```

### Timeline
```
timeout â”€â”€â–º reject (wins)
fetch    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ignored
```

### When to use
âœ… Timeouts  
âœ… First response wins  
âŒ Not for â€œfirst success onlyâ€

---

## ðŸ”¹ Promise.any

### Behavior
- Resolves on the **first fulfilled promise**
- Rejects only if **all promises reject**
- Rejection reason is an `AggregateError`

```js
const result = await Promise.any([
  fetch("/cdn-1"),
  fetch("/cdn-2"),
  fetch("/cdn-3"),
]);
```

### Timeline
```
cdn-1 âœ–
cdn-2 âœ–
cdn-3 âœ” â”€â”€â–º resolve
```

### When to use
âœ… Redundant endpoints  
âœ… Fallback strategies  
âŒ When failures matter

---

## ðŸ”¹ Promise.allSettled

### Behavior
- Waits for **all promises to settle**
- Never rejects
- Returns status for each promise

```js
const results = await Promise.allSettled([
  fetch("/a"),
  fetch("/b"),
  fetch("/c"),
]);
```

### Result shape
```js
[
  { status: "fulfilled", value: ... },
  { status: "rejected", reason: ... },
]
```

### Timeline
```
A âœ”
B âœ–
C âœ” â”€â”€â–º resolve with report
```

### When to use
âœ… Logging  
âœ… Batch operations  
âœ… Partial success allowed

---

## ðŸ§  Mental Model

Think of them as **rules for waiting**:

- `all` â†’ everyone must succeed
- `race` â†’ whoever finishes first decides
- `any` â†’ first success wins
- `allSettled` â†’ everyone reports back

---

## âš ï¸ Important Notes

- All promises **start immediately**
- None of these APIs make JS parallel
- They only coordinate async results

This is still sequential:
```js
await a();
await b();
```

This is concurrent:
```js
await Promise.all([a(), b()]);
```

---

## ðŸ§ª Real-World Use Cases

| Scenario | Best API |
|--------|----------|
| Load page data | `Promise.all` |
| Add request timeout | `Promise.race` |
| Fallback API | `Promise.any` |
| Batch processing | `Promise.allSettled` |

---

## âŒ Common Pitfalls

### 1. Using `all` when failures are acceptable
â†’ causes unnecessary crashes

### 2. Using `race` for â€œfirst successâ€
â†’ rejects too early

### 3. Forgetting `AggregateError` in `any`
```js
try {
  await Promise.any(promises);
} catch (e) {
  console.log(e.errors); // list of failures
}
```

---

## âœ… Summary Table

| API | Stops early | Rejects | Use for |
|----|------------|--------|--------|
| all | âŒ | âœ… | Must-have-all |
| race | âœ… | âœ… | Fastest / timeout |
| any | âœ… | âœ… (all fail) | First success |
| allSettled | âŒ | âŒ | Full report |

---

## âœ¨ Final Takeaway

> **Choose the Promise API based on failure behavior, not speed.**  
> They all run concurrently â€” the difference is *when you stop waiting*.
