
<svg width="980" height="320" viewBox="0 0 980 320" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Abort flow: Controller → Signal → Tasks (fetch, stream, custom)">
  <defs>
    <style>
      .box { fill: #ffffff; stroke: #2563eb; stroke-width: 2; rx: 12; }
      .sig { fill: #ecfeff; stroke: #06b6d4; stroke-width: 2; rx: 12; }
      .task { fill: #f8fafc; stroke: #0f172a; stroke-width: 2; rx: 12; }
      .label { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; font-size: 14px; fill: #0f172a; }
      .title { font-weight: 700; font-size: 16px; }
      .arrow { stroke: #0f172a; stroke-width: 2; marker-end: url(#arrow); }
      .note { fill: #64748b; font-size: 12px; }
    </style>
    <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#0f172a"/>
    </marker>
  </defs>

  <rect x="40" y="90" width="230" height="140" class="box"/>
  <text x="155" y="120" text-anchor="middle" class="label title">AbortController</text>
  <text x="155" y="142" text-anchor="middle" class="label">abort()</text>
  <text x="155" y="164" text-anchor="middle" class="label">abort(reason?)</text>
  <text x="155" y="186" text-anchor="middle" class="label">.signal</text>

  <rect x="320" y="90" width="260" height="140" class="sig"/>
  <text x="450" y="120" text-anchor="middle" class="label title">AbortSignal</text>
  <text x="450" y="142" text-anchor="middle" class="label">aborted: boolean</text>
  <text x="450" y="164" text-anchor="middle" class="label">reason: any</text>

  <rect x="640" y="60" width="280" height="60" class="task"/>
  <text x="780" y="86" text-anchor="middle" class="label title">fetch(url, {{ signal }})</text>

  <rect x="640" y="130" width="280" height="60" class="task"/>
  <text x="780" y="156" text-anchor="middle" class="label title">ReadableStream / writer</text>

  <rect x="640" y="200" width="280" height="60" class="task"/>
  <text x="780" y="226" text-anchor="middle" class="label title">customTask(signal)</text>

  <line x1="270" y1="160" x2="320" y2="160" class="arrow"/>
  <line x1="580" y1="120" x2="640" y2="90" class="arrow"/>
  <line x1="580" y1="160" x2="640" y2="160" class="arrow"/>
  <line x1="580" y1="200" x2="640" y2="230" class="arrow"/>

  <text x="490" y="300" text-anchor="middle" class="note">Abort once → the signal notifies all attached tasks to cancel and cleanup</text>
</svg>
